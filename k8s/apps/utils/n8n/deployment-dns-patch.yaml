# Strategic merge patch to fix Alpine DNS resolution issues
# Alpine's musl resolver requires ndots=1 to properly resolve cluster FQDNs
apiVersion: apps/v1
kind: Deployment
metadata:
  name: n8n
  namespace: n8n
spec:
  template:
    spec:
      dnsConfig:
        options:
          # Lower ndots to avoid search-domain expansion issues (musl/glibc resolver short-circuit)
          # and ensure external and cluster FQDNs resolve correctly.
          - name: ndots
            value: "1"
